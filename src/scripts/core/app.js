import"@styles/variables.css";import"@styles/reset.css";import"@styles/main.css";import"@styles/pages/home.css";import"@styles/common/navbar.css";import"@styles/common/bottom-nav.css";import router from"./router.js";import Auth from"./auth.js";import i18n from"./i18n.js";import Navbar from"../../components/common/navbar.js";import BottomNav from"../../components/common/bottom-nav.js";class App{constructor(){this.init()}init(){this.renderCommonComponents(),this.setupRouterHooks(),this.initAuth(),this.initI18n(),this.mountGlobals()}renderCommonComponents(){this.navbar=new Navbar,this.bottomNav=new BottomNav}setupRouterHooks(){router.setBeforeEach((t,o)=>!(["profile","payment"].includes(t)&&!Auth.isLoggedIn()&&(router.navigate("/login",{redirect:t}),1))),router.setAfterEach((t,o)=>{this.updateActiveNav(t)})}updateActiveNav(t){document.querySelectorAll(".nav-item").forEach(o=>{o.classList.remove("active"),o.dataset.page===t&&o.classList.add("active")})}initAuth(){const t=localStorage.getItem("token");t&&Auth.setToken(t)}initI18n(){const t=navigator.language.split("-")[0],o=localStorage.getItem("language")||(["en","zh","es","ja"].includes(t)?t:"en");i18n.init(o)}mountGlobals(){window.app=this,window.router=router,window.auth=Auth,window.i18n=i18n}}new App;